{% extends 'pages/main_base.html' %}
{% load i18n %}
{% load static %}

{% block title %}Colorify - Contact{% endblock %}
{% block navbar_class %}bg-gradient-to-r from-purple-100 via-white to-blue-100{% endblock %}

{% block content %}
    <div class="bg-gradient-to-r from-purple-100 via-white to-blue-100">
      <div class="text-center py-28">
        <div class="relative inline-block">
            <h1 class="text-5xl font-semibold mb-2 flex flex-wrap justify-center items-center gap-2">
                <span>Get in</span>
                <span class="relative">
                    <span class="text-blue-600">Touch</span>
                    <svg class="absolute -bottom-6 right-0 w-32 h-8" viewBox="0 0 1200 100">
                        <path 
                            d="M0,50 Q600,-80 1200,50" 
                            stroke="#FF4500" 
                            stroke-width="25" 
                            fill="none"
                        />
                    </svg>
                </span>
            </h1>
        </div>
        <p class="text-gray-600 mt-8 max-w-4xl mx-auto px-4">
            Lorem ipsum dolor sit amet consectetur adipiscing elit felis
        </p>
      </div>
    </div>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 mb-20 ">
            <!-- Contact Form Section -->
             <div class="">
               <h2 class="text-4xl font-semibold mb-10">Contact</h2>
               <div class="flex gap-20 mb-10 ">
                <div class="flex items-center gap-4">
                  <div class="bg-blue-100 p-3 rounded-lg">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                      </svg>
                  </div>
                  <div>
                      <h3 class="font-medium">Phone</h3>
                      <p class="text-gray-600">+1 (234) 567-8900</p>
                  </div>
                </div>

                <div class="flex items-center gap-4">
                  <div class="bg-blue-100 p-3 rounded-lg">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                      </svg>
                  </div>
                  <div>
                      <h3 class="font-medium">Email</h3>
                      <p class="text-gray-600">support@colorify.com</p>
                  </div>
                </div>
              </div>
               <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Consequatur omnis ducimus, molestiae dolorem alias doloremque rem sint porro asperiores accusantium, earum ea. Nam pariatur laboriosam quod asperiores necessitatibus at ea sunt, ab accusamus quaerat maiores repellendus alias ratione voluptates doloremque deleniti deserunt culpa minus! Totam iusto distinctio molestiae dicta laborum dolorem. Sint hic at qui. Lorem ipsum dolor sit amet consectetur adipisicing elit. Accusamus eum rerum molestiae sequi, mollitia corrupti sint unde qui nihil expedita! Saepe neque ex est rerum velit iste dolores exercitationem sint eaque quo! Ducimus quaerat facere corporis exercitationem quia, possimus neque eum deserunt tempora debitis labore illum provident harum pariatur quibusdam rerum at fugiat? Corrupti, fuga. 
               </p><p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Laboriosam sed voluptates, perspiciatis accusamus, exercitationem sapiente ratione tempora magni architecto quisquam harum, quo quasi sint impedit quas fugit eos aut adipisci soluta. Non enim corrupti unde earum! Placeat maxime doloremque esse, fugiat nulla voluptatum neque illum perspiciatis, aspernatur quod totam fugit adipisci provident dolores tempore enim.</p>
              </div>
              <div class="bg-white p-8 rounded-2xl shadow-lg">
                <form id="contactForm" class="space-y-6">
                    {% csrf_token %}
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="first_name" class="block text-sm font-medium text-gray-700 mb-1">First Name *</label>
                            <input type="text" id="first_name" name="first_name" value="{{ user.first_name }}" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                        </div>
                        <div>
                            <label for="last_name" class="block text-sm font-medium text-gray-700 mb-1">Last Name *</label>
                            <input type="text" id="last_name" name="last_name" value="{{ user.last_name }}" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                        </div>
                    </div>
            
                    <div>
                        <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email *</label>
                        <input type="email" id="email" name="email" value="{{ user.email }}" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                    </div>
            
                    <div>
                        <label for="subject" class="block text-sm font-medium text-gray-700 mb-1">Subject *</label>
                        <select id="subject" name="subject" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                            <option value="">Select a subject</option>
                            <option value="general">General Inquiry</option>
                            <option value="support">Technical Support</option>
                            <option value="billing">Billing Question</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
            
                    <div>
                        <label for="message" class="block text-sm font-medium text-gray-700 mb-1">Message *</label>
                        <textarea id="message" name="message" rows="4" placeholder="Message..." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required></textarea>
                    </div>
            
                    <button type="submit" class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition duration-300">
                        Submit Now
                    </button>
                </form>
            </div>
    
            <!-- Summary Section -->
          </div>
          <div class="w-full rounded-3xl bg-gradient-to-r from-[#00C6FF] via-[#6F5DE5] to-[#FF00EA] p-16 text-center">
            <h1 class="text-4xl md:text-5xl font-semibold text-white mb-4">
                Transform Your Design Vision with<br>
                Stunning Color Palettes!
            </h1>
            <p class="text-white/90 mb-8">
                Your Gateway to Stunning Palettes and Limitless Creativity!
            </p>
            <button class="bg-white text-blue-600 px-8 py-3 rounded-lg font-medium hover:bg-opacity-90 transition duration-300">
                Explore now
            </button>
          </div>
    </main>

    <!-- Success Modal -->
    <div id="successModal" class="fixed z-10 inset-0 overflow-y-auto hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" aria-hidden="true"></div>
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
            <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
                <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                    <div class="sm:flex sm:items-start">
                        <div class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10">
                            <svg class="h-6 w-6 text-green-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                            </svg>
                        </div>
                        <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left">
                            <h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title">
                                Success!
                            </h3>
                            <div class="mt-2">
                                <p class="text-sm text-gray-500" id="modalMessage">
                                    Your message has been sent successfully!
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                    <button type="button" id="closeModal" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const form = document.getElementById('contactForm');
        const modal = document.getElementById('successModal');
        const closeModal = document.getElementById('closeModal');
        const modalMessage = document.getElementById('modalMessage');

        form.addEventListener('submit', function(e) {
            e.preventDefault();
            
            fetch('{% url "contact-form-submission" %}', {
                method: 'POST',
                body: new FormData(form),
                headers: {
                    'X-Requested-With': 'XMLHttpRequest',
                    'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value,
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.status === 'success') {
                    modalMessage.textContent = data.message;
                    modal.classList.remove('hidden');
                    form.reset();
                } else {
                    alert(data.message);
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('An error occurred. Please try again.');
            });
        });

        closeModal.addEventListener('click', function() {
            modal.classList.add('hidden');
        });
    });
    </script>
{% endblock %}